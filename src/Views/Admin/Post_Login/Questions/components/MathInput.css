/* Ensure input field is full width */
.math-input-wrapper {
  width: 100%;
  position: relative;
}

/* Target the root block and the editable field inside it */
.math-input-wrapper :global(.mq-editable-field),
.math-input-wrapper :global(.mq-root-block),
.math-input-wrapper :global(.mq-math-mode),
.math-input-wrapper :global(.mq-textarea textarea) {
  width: 100% !important;
  font-size: 10px !important;
  /* Force small font size */
  padding: 8px !important;
}

/* Also target inner elements to be sure */
.math-input-wrapper :global(.mq-root-block) * {
  font-size: inherit !important;
}

/* 
   KEYBOARD STYLING TARGETS
   Targeting elements loosely by class name containing 'keyboard' 
   to catch the portal elements from @karyum/react-math-keyboard
*/

:global(div[class*="keyboard"]),
:global(div[id*="keyboard"]) {

  /* Only target the popup, not the input field if it happens to match */
  &:not(:global(.mq-editable-field)):not(:global(.mq-root-block)) {
    background-color: #007575 !important;
    /* Teal Background */
    border: 1px solid #005a5a !important;

    /* Layout Overrides */
    max-width: 400px !important;
    width: 70% !important;
    transform: scale(0.75) !important;
    transform-origin: top left !important;
    z-index: 1000 !important;
    position: fixed !important;
  }
}

/* KEY BUTTONS */
:global(div[class*="keyboard"]) button,
:global(div[id*="keyboard"]) button {
  background-color: #e0f2f1 !important;
  /* Light Teal key background */
  color: #004d40 !important;
  /* Dark Teal text */
  border: 1px solid #80cbc4 !important;
  /* Teal border */
  border-radius: 4px !important;

  /* Font resizing */
  font-size: 14px !important;
  min-width: 28px !important;
  min-height: 28px !important;
  margin: 1px !important;
}

/* Hover state for keys */
:global(div[class*="keyboard"]) button:hover,
:global(div[id*="keyboard"]) button:hover {
  background-color: #b2dfdb !important;
  /* Slightly darker hover */
}

/* TOOLBAR (Tabs/Sections) */
:global(div[class*="toolbar"]),
:global(div[class*="numericToolbar"]) {
  &:not(:global(.mq-editable-field)) {
    background-color: #004d40 !important;
    /* Darkest Teal for header/toolbar */
    color: white !important;
    border-bottom: 1px solid #00695c !important;
  }
}

/* Active Tab in Toolbar */
:global(div[class*="toolbar"]) div[class*="active"],
:global(div[class*="numericToolbar"]) div[class*="active"] {
  background-color: #007575 !important;
  color: white !important;
}

/* LAYOUT HELPERS */
:global(div[style*="position: fixed"]:not(.mq-editable-field):not(.mq-root-block)) {
  z-index: 1000 !important;
  max-width: 400px !important;
}